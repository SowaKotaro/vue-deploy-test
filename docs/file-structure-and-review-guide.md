# プロジェクト構成とコードレビュー手順書

## 1. はじめに

このドキュメントは、シンプルなTODOアプリケーションのソースコードを通じて、モダンなWebアプリケーション開発の基本を学ぶことを目的としています。

フロントエンドにVue.js、バックエンドにPython（FastAPI）を使用しており、両者がどのように連携して一つのサービスを構成するのかを理解するためのガイドです。

## 2. 技術スタック

このプロジェクトで使用されている主な技術は以下の通りです。

- **フロントエンド**: [Vue.js](https://vuejs.org/) (Viteによるビルド)
- **バックエンド**: [FastAPI](https://fastapi.tiangolo.com/) (PythonのWebフレームワーク)
- **データベース**: [SQLite](https://www.sqlite.org/index.html) (ファイルベースの軽量データベース)
- **データベース操作**: [SQLAlchemy](https://www.sqlalchemy.org/) (PythonのORMライブラリ)
- **HTTP通信**: [axios](https://axios-http.com/) (Vueからバックエンドを呼び出すためのライブラリ)

## 3. ファイル構成

プロジェクトは、フロントエンドとバックエンドの2つの主要なディレクトリに分かれています。

```
.
├── backend-api/         # バックエンドAPI (Python/FastAPI)
│   ├── main.py          # APIサーバーのメインロジック
│   ├── requirements.txt # Pythonの依存ライブラリ
│   ├── todo.db          # SQLiteデータベースファイル
│   └── venv/            # Python仮想環境
│
├── vue-test-app/        # フロントエンド (Vue.js)
│   ├── src/
│   │   └── App.vue      # アプリケーションのメインコンポーネント
│   ├── package.json     # Node.jsの依存ライブラリ
│   └── index.html       # エントリーポイントのHTML
│
└── docs/                # このドキュメントが格納されているディレクトリ
```

## 4. コードレビューの手順

以下の手順でコードを読むことで、アプリケーションの全体像をスムーズに把握できます。

### ステップ1: バックエンドの理解 (データの定義とAPI)

まず、アプリケーションの心臓部であるバックエンドから見ていきましょう。

1.  **ファイルを開く**: `backend-api/main.py`
2.  **データモデルを確認する**:
    -   `DBTodo` (SQLAlchemyモデル): データベースにどのようなテーブルとカラム（`id`, `title`, `completed`）が作られるかを定義しています。
    -   `Todo` (Pydanticモデル): APIがどのような形式でデータを返すか（レスポンスの型）を定義しています。
3.  **APIエンドポイントを確認する**:
    -   `@app.post("/todos/")`: 新しいTODOを作成するAPI。
    -   `@app.get("/todos/")`: すべてのTODOを取得するAPI。
    -   `@app.put("/todos/{todo_id}")`: 既存のTODOを更新するAPI。
    -   `@app.delete("/todos/{todo_id}")`: TODOを削除するAPI。

> **ポイント**: ここで、「バックエンドはTODOデータに関する4つの操作（作成, 取得, 更新, 削除）を提供している」ということを理解します。

### ステップ2: フロントエンドの理解 (画面とユーザー操作)

次に、ユーザーが直接触れる画面部分です。

1.  **ファイルを開く**: `vue-test-app/src/App.vue`
2.  **テンプレート(HTML)を確認する**: `<template>`ブロック
    -   TODOを追加するための入力フォーム (`<form>`)
    -   TODOの一覧を表示するリスト (`<ul>`, `v-for`)
    -   各TODOの完了チェックボックス (`<input type="checkbox">`) と削除ボタン (`<button>`)
    -   `v-model`, `@click`, `:class` など、Vueのディレクティブがどのように使われているかを確認します。
3.  **スクリプト(JavaScript)を確認する**: `<script setup>`ブロック
    -   `todos`, `newTodoTitle`: 画面の状態を管理するための変数（リアクティブ変数）です。
    -   `onMounted(fetchTodos)`: コンポーネントが最初に表示されたときに`fetchTodos`関数が呼ばれることを示します。
    -   `addTodo`, `deleteTodo`, `toggleTodo`: ユーザーの操作（追加、削除、チェック）に応じて実行される関数です。
    -   各関数内で`apiClient` (`axios`のインスタンス) を使って、ステップ1で確認したバックエンドAPIを呼び出していることに注目してください。

> **ポイント**: ここで、「ユーザーがボタンを押すと、特定の関数が呼ばれ、それがバックエンドAPIと通信している」という流れを理解します。

### ステップ3: データの流れを追う (具体例)

最後に、具体的な操作を通じて、フロントエンドとバックエンドの連携を見てみましょう。「新しいTODOを追加する」場合の例です。

1.  **ユーザー**: ブラウザの入力欄に「新しいタスク」と入力します。
    -   **フロントエンド**: `newTodoTitle`変数の値が「新しいタスク」になります。
2.  **ユーザー**: 「Add」ボタンをクリックします。
    -   **フロントエンド**: `@submit.prevent="addTodo"`により`addTodo`関数が実行されます。
3.  **フロントエンド**: `addTodo`関数が、`axios`を使ってバックエンドの`POST /todos/` APIを呼び出します。リクエストの本体には `{ title: "新しいタスク", completed: false }` が含まれます。
4.  **バックエンド**: `backend-api/main.py`の`create_todo`関数がリクエストを受け取ります。
5.  **バックエンド**: 受け取ったデータを使って`DBTodo`オブジェクトを作成し、データベース(`todo.db`)に新しい行として保存します。
6.  **バックエンド**: 保存したデータをフロントエンドに返します。
7.  **フロントエンド**: バックエンドから返ってきたデータを受け取り、`todos`配列に追加します。Vue.jsの機能により、画面のリストが自動的に更新されます。

## 5. まとめ

このように、バックエンドが「API」という形で機能を提供し、フロントエンドがそれを呼び出して利用するというのが、現代的なWebアプリケーションの基本的な構造です。

コードレビューの際は、ぜひこのアプリケーションを実際に動かしながら、ブラウザの開発者ツール（特に「ネットワーク」タブ）を開いてみてください。フロントエンドとバックエンドの間でどのようなデータがやり取りされているかをリアルタイムで確認でき、より深い理解につながります。
